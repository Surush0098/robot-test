<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ø³Ú©Ù†Ø± Ù†Ø§Ù… Ø§Ø³ØªØ®ÙˆØ§Ù†â€ŒÙ‡Ø§</title>
    <style>
        body { margin: 0; background-color: #222; font-family: monospace; overflow: hidden; }
        #sidebar {
            position: absolute; top: 0; right: 0; width: 300px; height: 100vh;
            background: #111; color: #0f0; overflow-y: auto; padding: 10px;
            border-left: 2px solid #0f0; font-size: 12px;
        }
        h3 { color: white; border-bottom: 1px solid white; margin-top: 0; }
        .highlight { color: yellow; font-weight: bold; font-size: 14px; background: #333; }
    </style>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
    <div id="sidebar">
        <h3>Ù†ØªØ§ÛŒØ¬ Ø§Ø³Ú©Ù† ÙØ§ÛŒÙ„ Robotx.glb</h3>
        <div id="results">Ø¯Ø± Ø­Ø§Ù„ Ù„ÙˆØ¯...</div>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // 1. ØµØ­Ù†Ù‡ Ø³Ø§Ø¯Ù‡
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x444444);
        const camera = new THREE.PerspectiveCamera(50, (window.innerWidth-300)/window.innerHeight, 0.1, 100);
        camera.position.set(0, 1.5, 3);
        
        const renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth - 300, window.innerHeight); // ÙØ¶Ø§ Ø¨Ø±Ø§ÛŒ Ø³Ø§ÛŒØ¯Ø¨Ø§Ø±
        document.body.appendChild(renderer.domElement);
        
        const controls = new OrbitControls(camera, renderer.domElement);
        scene.add(new THREE.DirectionalLight(0xffffff, 2));
        scene.add(new THREE.AmbientLight(0xffffff, 1));

        const resultBox = document.getElementById('results');

        // 2. Ù„ÙˆØ¯Ø± Ùˆ Ø§Ø³Ú©Ù†Ø±
        const loader = new GLTFLoader();
        
        loader.load('./Robotx.glb', function(gltf) {
            scene.add(gltf.scene);
            gltf.scene.position.y = -1;

            resultBox.innerHTML = ""; // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ù„ÙˆØ¯ÛŒÙ†Ú¯
            
            let foundHead = false;

            // Ø´Ø±ÙˆØ¹ Ø§Ø³Ú©Ù† ØªÙ…Ø§Ù… Ø§Ø¬Ø²Ø§
            gltf.scene.traverse((o) => {
                // Ù…Ø§ Ù‡Ù… Ø§Ø³ØªØ®ÙˆØ§Ù†â€ŒÙ‡Ø§ Ø±Ùˆ Ù„ÛŒØ³Øª Ù…ÛŒÚ©Ù†ÛŒÙ… Ù‡Ù… Ù…Ø´â€ŒÙ‡Ø§ Ø±Ùˆ
                if (o.isBone) {
                    let name = o.name;
                    let displayName = `ğŸ¦´ Bone: ${name}`;
                    
                    // Ø§Ú¯Ø± Ø§Ø³Ù…Ø´ Ø´Ø¨ÛŒÙ‡ Ø³Ø± Ø¨ÙˆØ¯ØŒ Ù‡Ø§ÛŒÙ„Ø§ÛŒØª Ú©Ù†
                    if (name.toLowerCase().includes('head') || name.toLowerCase().includes('neck')) {
                        displayName = `<span class="highlight">>>> ${displayName} <<<</span>`;
                        foundHead = true;
                    }

                    resultBox.innerHTML += displayName + "<br><hr style='border-color:#333'>";
                }
            });

            if (!foundHead) {
                resultBox.innerHTML += "<br><span style='color:red; font-size:16px'>Ù‡Ø´Ø¯Ø§Ø±: Ù‡ÛŒÚ† Ø§Ø³ØªØ®ÙˆØ§Ù†ÛŒ Ø¨Ø§ Ù†Ø§Ù… Head Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯!</span>";
            }

        }, undefined, function(e) {
            resultBox.innerHTML = "Ø®Ø·Ø§ Ø¯Ø± Ù„ÙˆØ¯ ÙØ§ÛŒÙ„! Ø§Ø³Ù… ÙØ§ÛŒÙ„ Ø¯Ø±Ø³Øª Ø§Ø³ØªØŸ";
        });

        function animate() { requestAnimationFrame(animate); renderer.render(scene, camera); }
        animate();
    </script>
</body>
</html>
