<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Babylon â€“ Bone TEST</title>

<style>
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    overflow: hidden;
}
#renderCanvas {
    width: 100%;
    height: 100%;
}
</style>

<script src="https://cdn.babylonjs.com/babylon.js"></script>
<script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
</head>

<body>
<canvas id="renderCanvas"></canvas>

<script>
const canvas = document.getElementById("renderCanvas");
const engine = new BABYLON.Engine(canvas, true);

let headBone;

const scene = new BABYLON.Scene(engine);
scene.clearColor = new BABYLON.Color4(0.15,0.15,0.15,1);

// ðŸ“· Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø®ÛŒÙ„ÛŒ Ø³Ø§Ø¯Ù‡
const camera = new BABYLON.ArcRotateCamera(
    "cam",
    Math.PI,
    Math.PI / 2.2,
    4,
    new BABYLON.Vector3(0,1.4,0),
    scene
);
camera.attachControl(canvas, true);

// ðŸ’¡ Ù†ÙˆØ±
new BABYLON.HemisphericLight("h", new BABYLON.Vector3(0,1,0), scene);

// â¬‡ï¸ Ù„ÙˆØ¯ Ù…Ø¯Ù„
BABYLON.SceneLoader.ImportMeshAsync(
    "",
    "./",
    "Robotx.glb",
    scene
).then((res) => {

    const skeleton = res.skeletons[0];
    console.log("Skeleton:", skeleton);

    skeleton.bones.forEach(b => console.log(b.name));

    headBone = skeleton.bones.find(b => b.name === "mixamorigHead");

    console.log("HEAD BONE:", headBone);

    if (!headBone) {
        alert("Head bone Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯");
        return;
    }

    let t = 0;

    scene.onBeforeRenderObservable.add(() => {
        t += 0.02;

        // ðŸ”¥ ØªØ³Øª ÙˆØ§Ø¶Ø­: Ø³Ø± Ø¨Ø§ÛŒØ¯ Ú†Ù¾ Ø±Ø§Ø³Øª ØªØ§Ø¨ Ø¨Ø®ÙˆØ±Ù‡
        headBone.rotation.y = Math.sin(t) * 0.6;
    });
});

engine.runRenderLoop(() => scene.render());
window.addEventListener("resize", () => engine.resize());
</script>
</body>
</html>
