<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÛŒØ³Øª Ú©Ø§Ù…Ù„ Ø§Ø¬Ø²Ø§ÛŒ ÙØ§ÛŒÙ„</title>
    <style>
        body { margin: 0; background-color: #222; overflow: hidden; font-family: monospace; }
        
        /* Ø§Ø³ØªØ§ÛŒÙ„ Ù„ÛŒØ³Øª Ø³Ù…Øª Ø±Ø§Ø³Øª */
        #list-container {
            position: absolute; top: 0; right: 0; width: 400px; height: 100vh;
            background: #111; border-left: 2px solid #555;
            overflow-y: auto; padding: 10px; box-sizing: border-box;
            font-size: 13px; z-index: 10;
        }
        
        .item { margin-bottom: 5px; padding: 5px; border-bottom: 1px solid #333; }
        .bone { color: #00ff00; font-weight: bold; } /* Ø§Ø³ØªØ®ÙˆØ§Ù† Ø³Ø¨Ø² */
        .mesh { color: #ffffff; } /* Ù…Ø´ Ø³ÙÛŒØ¯ */
        .other { color: #888; } /* Ø¨Ù‚ÛŒÙ‡ Ú†ÛŒØ²Ù‡Ø§ Ø®Ø§Ú©Ø³ØªØ±ÛŒ */
        
        h3 { color: white; margin-top: 0; border-bottom: 1px solid white; padding-bottom: 5px;}
    </style>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>
<body>
    <div id="list-container">
        <h3>Ù„ÛŒØ³Øª ØªÙ…Ø§Ù… Ø§Ø¬Ø²Ø§ÛŒ ÙØ§ÛŒÙ„ Robotx.glb</h3>
        <div id="output">Ø¯Ø± Ø­Ø§Ù„ Ø®ÙˆØ§Ù†Ø¯Ù† ÙØ§ÛŒÙ„...</div>
    </div>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // 1. ØµØ­Ù†Ù‡ Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù…Ø¯Ù„
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x333333);
        const camera = new THREE.PerspectiveCamera(50, (window.innerWidth-400)/window.innerHeight, 0.1, 100);
        camera.position.set(0, 1.5, 4);
        
        const renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth - 400, window.innerHeight); // Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ù„ÛŒØ³Øª
        document.body.appendChild(renderer.domElement);
        
        const controls = new OrbitControls(camera, renderer.domElement);
        scene.add(new THREE.AmbientLight(0xffffff, 2));

        const outputDiv = document.getElementById('output');

        // 2. Ù„ÙˆØ¯Ø± ÙØ§ÛŒÙ„
        const loader = new GLTFLoader();
        
        loader.load('./Robotx.glb', function(gltf) {
            scene.add(gltf.scene);
            
            // Ù†Ù…Ø§ÛŒØ´ Ø§Ø³Ú©Ù„Øª (Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ú†Ø´Ù…ÛŒ)
            const helper = new THREE.SkeletonHelper(gltf.scene);
            scene.add(helper);

            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ù„ÙˆØ¯ÛŒÙ†Ú¯
            outputDiv.innerHTML = "";
            let count = 0;

            // --- Ø§Ø³Ú©Ù† Ú©Ù„ ÙØ§ÛŒÙ„ ---
            gltf.scene.traverse((o) => {
                count++;
                
                // ØªØ´Ø®ÛŒØµ Ù†ÙˆØ¹ Ø¢Ø¨Ø¬Ú©Øª
                let typeClass = "other";
                let typeName = o.type;
                let icon = "ğŸ”¹";

                if (o.isBone) {
                    typeClass = "bone";
                    typeName = "BONE (Ø§Ø³ØªØ®ÙˆØ§Ù†)";
                    icon = "ğŸ¦´";
                } else if (o.isMesh || o.isSkinnedMesh) {
                    typeClass = "mesh";
                    typeName = "MESH";
                    icon = "ğŸ“¦";
                }

                // Ø³Ø§Ø®Øª HTML Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¢ÛŒØªÙ…
                const html = `
                    <div class="item ${typeClass}">
                        ${icon} <strong>Name:</strong> ${o.name}<br>
                        <span style="font-size:10px; opacity:0.7">Type: ${typeName}</span>
                    </div>
                `;
                
                outputDiv.innerHTML += html;
            });

            if (count === 0) {
                outputDiv.innerHTML = "<h2 style='color:red'>ÙØ§ÛŒÙ„ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª!</h2>";
            }

        }, undefined, function(e) {
            outputDiv.innerHTML = "<h2 style='color:red'>Ø®Ø·Ø§ Ø¯Ø± Ù„ÙˆØ¯ ÙØ§ÛŒÙ„!</h2><p>Ù…Ø·Ù…Ø¦Ù† Ø´Ùˆ Ø§Ø³Ù… ÙØ§ÛŒÙ„ Robotx.glb Ø¨Ø§Ø´Ù‡.</p>";
            console.error(e);
        });

        function animate() { requestAnimationFrame(animate); renderer.render(scene, camera); }
        animate();
    </script>
</body>
</html>
